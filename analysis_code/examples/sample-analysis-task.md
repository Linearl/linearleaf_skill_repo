# 示例：代码质量分析任务

> 本文档展示一个完整的代码质量分析任务示例

## 📋 任务信息

| 项目 | 内容 |
|------|------|
| **项目名称** | sample_project |
| **项目类型** | Python 数据处理应用 |
| **技术栈** | Python 3.9, Pandas, NumPy |
| **分析目标** | 评估代码质量，识别改进机会 |
| **分析日期** | 2025-01-20 |

---

## 🎯 阶段一：总体规划

### 分析目标确认

- [x] 代码质量评估（复杂度、可读性、可维护性）
- [x] 技术债务识别
- [ ] 性能分析（本次不重点关注）
- [ ] 安全评估（本次不重点关注）

### 分析计划

| 轮次 | 名称 | 主要目标 |
|------|------|----------|
| 1 | 初始质量评估 | 建立质量基线，识别主要问题 |
| 2 | 深度代码审查 | 针对问题模块深入分析 |
| - | 汇总报告 | 整合结果，提出改进建议 |

---

## 🔄 阶段二：循环分析

### 轮次1: 初始质量评估

#### 收集的指标

```json
{
  "project_path": "C:/projects/sample_project",
  "python_files": 15,
  "code_lines": 2500,
  "total_functions": 85,
  "total_classes": 12,
  "quality_score": 72,
  "complexity_distribution": {
    "low": 70,
    "medium": 12,
    "high": 3,
    "very_high": 0
  }
}
```

#### 关键发现

**正面发现** ✅:
1. 整体代码结构清晰，模块划分合理
2. 大部分函数复杂度在可接受范围内
3. 有基本的文档字符串

**需要关注** ⚠️:
1. 3个函数复杂度较高，需要重构
2. 注释覆盖率偏低（约8%）
3. 存在部分重复代码

#### 识别的问题

| ID | 问题 | 位置 | 优先级 |
|----|------|------|--------|
| H1 | 函数 `process_data` 复杂度过高 (25) | data_processor.py:45 | P0 |
| H2 | 函数 `validate_input` 超过100行 | validator.py:78 | P0 |
| M1 | 缺少类型注解 | 多处 | P1 |
| M2 | 重复的数据验证逻辑 | processor.py, validator.py | P1 |
| L1 | 部分变量命名不够清晰 | 多处 | P2 |

### 轮次2: 深度代码审查

针对轮次1发现的高优先级问题进行深入分析...

（详细内容省略）

---

## 📊 阶段三：汇总报告

### 整体评估

| 维度 | 评分 | 状态 |
|------|------|------|
| 代码质量 | 7.2/10 | 🟡 一般 |
| 可维护性 | 6.8/10 | 🟡 需改进 |
| 技术债务 | 中等 | 🟡 可控 |

### 改进建议 TOP 5

| 优先级 | 建议 | 预期效果 |
|--------|------|----------|
| P0 | 重构 `process_data` 函数，拆分为多个小函数 | 降低复杂度50% |
| P0 | 重构 `validate_input` 函数 | 提高可读性 |
| P1 | 提取重复的验证逻辑到公共模块 | 减少重复代码30% |
| P1 | 添加类型注解 | 提高代码可维护性 |
| P2 | 改进注释覆盖率 | 提高可理解性 |

### 下一步建议

1. **短期（1-2周）**: 处理 P0 级别问题
2. **中期（1个月）**: 完成 P1 级别改进
3. **持续改进**: 在日常开发中逐步处理 P2 问题

---

*此为示例文档，展示 analysis_code skill 的典型输出*
